DROP DATABASE IF EXISTS UNIVERSITE;

CREATE DATABASE UNIVERSITE CHARACTER SET utf8;
USE UNIVERSITE;

CREATE TABLE IF NOT EXISTS FILIERE
(
    id_filiere VARCHAR(15) PRIMARY KEY NOT NULL,
    nom_filiere VARCHAR(50)
);

CREATE TABLE IF NOT EXISTS ETUDIANT
(
    id_etudiant INT PRIMARY KEY NOT NULL AUTO_INCREMENT,
    nom VARCHAR(50),
    prenom VARCHAR(50),
    date_naissance DATE,
    id_filiere VARCHAR(15),
    CONSTRAINT fk_id_filiere FOREIGN KEY (id_filiere)
               REFERENCES FILIERE(id_filiere)
               ON UPDATE CASCADE
               ON DELETE CASCADE
);

CREATE TABLE IF NOT EXISTS PROFESSEUR
(
    id INT PRIMARY KEY NOT NULL AUTO_INCREMENT,
    nom VARCHAR(50),
    prenom VARCHAR(50)
);

CREATE TABLE IF NOT EXISTS COURS
(
    id_cours VARCHAR(15) PRIMARY KEY NOT NULL,
    nom_cours VARCHAR(50),
    id_professeur INT,
    CONSTRAINT fk_id_professeur FOREIGN KEY (id_professeur)
               REFERENCES PROFESSEUR(id)
               ON UPDATE CASCADE
               ON DELETE CASCADE
);

CREATE TABLE IF NOT EXISTS INSCRIPTION
(
    id_etudiant INT,
    id_cours VARCHAR(15),
    annee_scolaire YEAR,
    note FLOAT,
    PRIMARY KEY (id_etudiant, id_cours, annee_scolaire),
    CONSTRAINT fk_inscription
    FOREIGN KEY (id_etudiant)
            REFERENCES ETUDIANT(id_etudiant)
            ON UPDATE CASCADE
            ON DELETE CASCADE,
    FOREIGN KEY (id_cours)
            REFERENCES COURS(id_cours)
            ON UPDATE CASCADE
            ON DELETE CASCADE
);


INSERT INTO FILIERE VALUES ('L1_PHILO', 'License 1 de philosophie');
INSERT INTO FILIERE VALUES ('M1_SOCIO', 'Master 1 de sociologie');

INSERT INTO ETUDIANT VALUES (NULL, 'BAUDOUIN', 'Adélia', '2000-04-29', 'L1_PHILO');
INSERT INTO ETUDIANT VALUES (NULL, 'BUSH', 'Kate', '1955-09-13', 'L1_PHILO');
INSERT INTO ETUDIANT VALUES (NULL, 'GAGA', 'Lady', '1989-08-12', 'M1_SOCIO');
INSERT INTO ETUDIANT VALUES (NULL, 'JACQUEMYNS', 'Aymée', '2004-05-06', 'M1_SOCIO');
INSERT INTO ETUDIANT VALUES (NULL, 'MACRON', 'Emmanuel', '1977-08-12', 'M1_SOCIO');
INSERT INTO ETUDIANT VALUES (NULL, 'ZIUDHIDH', 'Pefznjefk', '1989-08-12', 'L1_PHILO');
INSERT INTO ETUDIANT VALUES (NULL, 'IHIUH', 'Tzeoijzeof', '1989-08-12', 'M1_SOCIO');

INSERT INTO PROFESSEUR VALUES (NULL, 'TROESTLER', 'Olivier');
INSERT INTO PROFESSEUR VALUES (NULL, 'KREYDER', 'Armand');
INSERT INTO PROFESSEUR VALUES (NULL, 'ROBERT', 'Marie-Dolorès');

INSERT INTO COURS VALUES ('STAT', 'Statistiques', 1);
INSERT INTO COURS VALUES ('HIST_PHILO', 'Histoire de la philosophie', 2);
INSERT INTO COURS VALUES ('ANTHRO', 'Anthropologie', 3);

INSERT INTO INSCRIPTION VALUES (1, 'STAT', '2023', 12.5);
INSERT INTO INSCRIPTION VALUES (1, 'HIST_PHILO', '2023', 16.0);
INSERT INTO INSCRIPTION VALUES (2, 'STAT', '2023', 9.25);
INSERT INTO INSCRIPTION VALUES (2, 'HIST_PHILO', '2023', 3.25);
INSERT INTO INSCRIPTION VALUES (3, 'STAT', '2023', 13.25);
INSERT INTO INSCRIPTION VALUES (3, 'ANTHRO', '2023', 18.0);
INSERT INTO INSCRIPTION VALUES (4, 'STAT', '2023', 0.25);
INSERT INTO INSCRIPTION VALUES (4, 'ANTHRO', '2023', 15.0);
INSERT INTO INSCRIPTION VALUES (5, 'STAT', '2023', 16.25);
INSERT INTO INSCRIPTION VALUES (5, 'ANTHRO', '2023', 14.0);
INSERT INTO INSCRIPTION VALUES (6, 'STAT', '2023', 13);
INSERT INTO INSCRIPTION VALUES (6, 'ANTHRO', '2023', 8);
INSERT INTO INSCRIPTION VALUES (7, 'STAT', '2023', 15);
INSERT INTO INSCRIPTION VALUES (7, 'ANTHRO', '2023', 2);
